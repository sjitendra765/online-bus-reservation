{"version":3,"sources":["webpack:///webpack/bootstrap 5f9b6e6f33d54dcc1106","webpack:///./studio/main_dev.js","webpack:///./studio/ImageEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/ImageUploadButton.js","webpack:///external \"Studio\""],"names":[],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5f9b6e6f33d54dcc1106\n **/","import ImageEditor from './ImageEditor.js'\nimport ImageUploadButton from './ImageUploadButton.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({ name: 'images', faIcon: 'fa-camera', visibleName: 'image', onNew: ImageUploadButton.OpenUpload,\n  helpUrl: 'http://jsreport.net/learn/images' })\nStudio.addEditorComponent('images', ImageEditor)\nStudio.addToolbarComponent(ImageUploadButton)\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\n\r\nexport default class ImageEditor extends Component {\r\n  static propTypes = {\r\n    entity: React.PropTypes.object.isRequired\r\n  }\r\n\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    return (<div className='custom-editor'>\r\n      <div><h1><i className='fa fa-camera' /> {entity.name}</h1></div>\r\n      <div>\r\n        <div>Embed into a html based template using data uri scheme:\r\n          <code>\r\n            <h2 style={{textTransform: 'none'}}>\r\n              &lt;img src='{'{#image ' + entity.name + \"}'\"}/&gt;\r\n            </h2>\r\n          </code>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <div>Embed using raw base64 encoding:\r\n          <code>\r\n            <h2 style={{textTransform: 'none'}}>\r\n              {'{#image ' + entity.name + ' @encoding=base64}'}\r\n            </h2>\r\n          </code>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{overflow: 'auto'}}>\r\n        <img src={'data:' + entity.contentType + ';base64,' + entity.content} style={{display: 'block', margin: '3rem auto'}} />\r\n      </div>\r\n    </div>)\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ImageEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nlet _imageUploadButton\r\n\r\nexport default class ImageUploadButton extends Component {\r\n  static propTypes = {\r\n    tab: React.PropTypes.object,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\r\n  // this triggers invisible button in the toolbar\r\n  static OpenUpload () {\r\n    _imageUploadButton.openFileDialog(true)\r\n  }\r\n\r\n  componentDidMount () {\r\n    _imageUploadButton = this\r\n  }\r\n\r\n  upload (e) {\r\n    if (!e.target.files.length) {\r\n      return\r\n    }\r\n\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n\r\n    reader.onloadend = async () => {\r\n      this.refs.file.value = ''\r\n      // playground/workspaces extension needs to save the new version\r\n      // so uploading of the new image goes into it\r\n      if (Studio.workspaces) {\r\n        await Studio.workspaces.save()\r\n      }\r\n\r\n      if (this.forNew) {\r\n        const response = await Studio.api.post('/api/image', {\r\n          attach: { filename: 'file.png', file: file }\r\n        })\r\n\r\n        const entity = {\r\n          __entitySet: 'images',\r\n          _id: response._id,\r\n          name: response.name,\r\n          shortid: response.shortid\r\n        }\r\n\r\n        Studio.addExistingEntity(entity)\r\n        Studio.openTab(Object.assign({}, entity))\r\n      } else {\r\n        await Studio.api.post(`/api/image/${this.props.tab.entity.shortid}`, {\r\n          attach: { filename: 'file.png', file: file }\r\n        })\r\n\r\n        Studio.loadEntity(this.props.tab.entity._id, true)\r\n      }\r\n    }\r\n\r\n    reader.onerror = function () {\r\n      alert('There was an error reading the file!')\r\n    }\r\n\r\n    reader.readAsBinaryString(file)\r\n  }\r\n\r\n  openFileDialog (forNew) {\r\n    this.forNew = forNew\r\n\r\n    this.refs.file.dispatchEvent(new MouseEvent('click', {\r\n      'view': window,\r\n      'bubbles': false,\r\n      'cancelable': true\r\n    }))\r\n  }\r\n\r\n  renderUpload () {\r\n    return <input\r\n      type='file' key='file' ref='file' style={{display: 'none'}} onChange={(e) => this.upload(e)}\r\n      accept='image/*'></input>\r\n  }\r\n\r\n  render () {\r\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'images') {\r\n      return this.renderUpload(true)\r\n    }\r\n\r\n    return <div className='toolbar-button' onClick={() => { this.openFileDialog() }}>\r\n      <i className='fa fa-cloud-upload' />Upload\r\n      {this.renderUpload()}\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ImageUploadButton.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}