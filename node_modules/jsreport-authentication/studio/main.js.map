{"version":3,"sources":["webpack:///webpack/bootstrap 01901844e13eaa317109","webpack:///./studio/main_dev.js","webpack:///./studio/UserEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/ChangePasswordModal.js","webpack:///external \"Studio\"","webpack:///./studio/LogoutSettingsButton.js","webpack:///./studio/ChangePasswordSettingsButton.js","webpack:///./studio/ChangePasswordButton.js","webpack:///./studio/NewUserModal.js"],"names":[],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 01901844e13eaa317109\n **/","import UserEditor from './UserEditor.js'\nimport LogoutSettingsButton from './LogoutSettingsButton.js'\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\nimport ChangePasswordButton from './ChangePasswordButton.js'\nimport Studio from 'jsreport-studio'\nimport NewUserModal from './NewUserModal.js'\n\n// we want to be at the front, because other extension like scheduling relies on loaded user\nStudio.initializeListeners.unshift(async () => {\n  const response = await Studio.api.get('/api/settings')\n\n  if (!response.tenant) {\n    // authentication not enabled in config\n    return\n  }\n\n  Studio.authentication = { user: response.tenant }\n\n  if (Studio.authentication.user.isAdmin) {\n    Studio.addEntitySet({\n      name: 'users',\n      faIcon: 'fa-user',\n      visibleName: 'user',\n      nameAttribute: 'username',\n      onNew: () => Studio.openModal(NewUserModal)\n    })\n    Studio.addEditorComponent('users', UserEditor)\n    Studio.addToolbarComponent(ChangePasswordButton)\n  }\n\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\n  Studio.addToolbarComponent(() => <div className='toolbar-button'><span><i\n    className='fa fa-user' /> {Studio.authentication.user.username}</span></div>, 'settingsBottom')\n  Studio.addToolbarComponent(LogoutSettingsButton, 'settingsBottom')\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class DataEditor extends Component {\r\n  static propTypes = {\r\n    entity: React.PropTypes.object.isRequired,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (this.props.entity.__isNew && !this.props.entity.password) {\r\n      Studio.openModal(ChangePasswordModal, { entity: this.props.entity })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    return <div className='custom-editor'>\r\n      <h1><i className='fa fa-user' /> {entity.username}</h1>\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/UserEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired,\r\n    options: PropTypes.object.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async changePassword () {\r\n    const { entity } = this.props.options\r\n    const { close } = this.props\r\n\r\n    try {\r\n      let data = {\r\n        newPassword: this.refs.newPassword1.value\r\n      }\r\n\r\n      if (!Studio.authentication.user.isAdmin) {\r\n        data.oldPassword = this.refs.oldPassword.value\r\n      }\r\n\r\n      await Studio.api.post(`/api/users/${entity.shortid}/password`, { data: data })\r\n      this.refs.newPassword1.value = ''\r\n      this.refs.newPassword2.value = ''\r\n      close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      {Studio.authentication.user.isAdmin ? '' : <div className='form-group'>\r\n        <label>old password</label>\r\n        <input type='password' ref='oldPassword' />\r\n      </div>\r\n      }\r\n      <div className='form-group'>\r\n        <label>new password</label>\r\n        <input type='password' ref='newPassword1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password verification</label>\r\n        <input type='password' ref='newPassword2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordModal.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class LogoutSettingsButton extends Component {\r\n  render () {\r\n    return <div>\r\n      <div\r\n        onClick={() => this.refs.logout.click()} style={{ cursor: 'pointer' }}>\r\n        <form method='POST' action={Studio.resolveUrl('/logout')}>\r\n          <input ref='logout' type='submit' id='logoutBtn' style={{ display: 'none' }} />\r\n        </form>\r\n        <i className='fa fa-power-off' /> Logout\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/LogoutSettingsButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default (props) => {\r\n  return Studio.authentication.user.isAdmin ? <span /> : <div>\r\n    <a\r\n      id='changePassword'\r\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\r\n      style={{cursor: 'pointer'}}><i className='fa fa-key'></i>\r\n      Change password\r\n    </a>\r\n  </div>\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordSettingsButton.js\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordButton extends Component {\r\n  static propTypes = {\r\n    tab: React.PropTypes.object,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  render () {\r\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'users') {\r\n      return <span />\r\n    }\r\n\r\n    return <div>\r\n      <div\r\n        className='toolbar-button'\r\n        onClick={(e) => Studio.openModal(ChangePasswordModal, { entity: this.props.tab.entity })}>\r\n        <i className='fa fa-key' /> Change Password\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordButton.js\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class NewUserModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async createUser () {\r\n    if (!this.refs.username.value) {\r\n      return this.setState({ userNameError: true })\r\n    }\r\n\r\n    if (!this.refs.password1.value) {\r\n      return this.setState({ passwordError: true })\r\n    }\r\n\r\n    try {\r\n      let response = await Studio.api.post('/odata/users', {\r\n        data: {\r\n          username: this.refs.username.value,\r\n          password: this.refs.password1.value\r\n        }\r\n      })\r\n      response.__entitySet = 'users'\r\n\r\n      Studio.addExistingEntity(response)\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.password2.value && this.refs.password2.value !== this.refs.password1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  validateUsername () {\r\n    this.setState(\r\n      {\r\n        userNameError: this.refs.username.value === '',\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      <div className='form-group'>\r\n        <label>Username</label>\r\n        <input type='text' ref='username' onChange={() => this.validateUsername()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Password</label>\r\n        <input type='password' ref='password1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Password verification</label>\r\n        <input type='password' ref='password2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span\r\n          style={{color: 'red', display: this.state.userNameError ? 'block' : 'none'}}>username must be filled</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.createUser()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/NewUserModal.js\n **/"],"sourceRoot":""}